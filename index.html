<!DOCTYPE html>
<html>

<head>
    <title>User Location Test</title>
</head>

<body>
    <h2>User Location</h2>
    <p id="location">Fetching location...</p>

    <script>
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    document.getElementById("location").innerText =
                        "Latitude: " + lat + ", Longitude: " + lon;
                    getNearestCoast(lat, lon)
                },
                (error) => {
                    document.getElementById("location").innerText =
                        "Error " + error.code + ": " + error.message;
                }
            );
        } else {
            document.getElementById("location").innerText =
                "Geolocation not supported by this browser.";
        }
        async function getNearestCoast(lat, lon) {
            const url = `http://localhost:3000/nearest-coast?lat=${lat}&lon=${lon}`;
            const res = await fetch(url);
            const data = await res.json();
            alert("coast data:", JSON.stringify(data));
        }
    </script>
</body>

</html>